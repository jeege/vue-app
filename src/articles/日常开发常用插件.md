# 开发常用
## [base.js](http://static2.51fanli.net/webapp/js/base.js)
### String.prototype.format
```javascript
    var str = "hello"
    "{0} world".format(str) // -> hello world
```

### String.prototype.setCookie | setCookieAlias
**区别：value转码**
- setCookie -> escape
- setCookieAlias -> encodeURIComponent

参数|类型|描述|是否必填
---|:--:|:---:|:-----:
value|String|cookie的值|是
expiryDays|Number|cookie过期天数,默认关闭浏览器|否
domain|String|指定生效域名（包括子域）|否
path|String|生效的页面路径|否
secure|Boolean|cookie是否只会被https传输|否
  
```javascript
    var str = "cookieKey"
    // 设置cookieKey=cookieValue
    str.setCookie('cookieValue') 
```

### String.prototype.getCookie | getCookieAlias
**区别：value解码**
- setCookie -> unescape
- setCookieAlias -> decodeURIComponent
  

```javascript
    var str = "cookieKey"
    str.getCookie() // -> cookieValue，默认''
```

### window.StringBuilder
方法|返回值|描述
---|:--:|:---:
append|StringBuilder实例|插入字符串
toString|String|合并所有插入的字符串

```javascript
    var ss = new StringBuilder()
    // hello world
    ss.append('hello').append(' world').toString()
```

### window.GeneralRegs
常用校验正则表达式
key|描述
---|:---:
alipay|支付宝账号-只能是邮箱和手机
bankaccount|银行账号-仅包含英文字母、数字及中划线
blank|空
cellphone|移动电话
email|邮箱
icard|大陆身份证-弱判断，只需位数和形式满足
ihkcard|香港身份证
itwcard|台湾身份证
uname|用户名-仅包含汉字英文字母及空格
url|url
vercode|6位数字验证码


### window.InputValidation
输入校验
key|描述
---|:---:
isNumber|判断数字
isEmail|判断邮箱
isName|判断用户名
isUrl|判断url
isPhone|判断手机号
isIcard|判断身份证格式
isAlipay|判断支付宝账号
isBankaccount|判断银行卡

```javascript
    InputValidation.isNumber('1') // -> false
```

### window.FLNS
注册命名空间

```javascript
    FLNS.register("x.y.z")
    x.add(key, value)
    x.y.add(key, value)
    x.y.z.add(key, value)
```

### window.Fanli
- Class
- Utility
  
    变量&方法|说明
    --|:--:
    random(n)|生成n位随机数
    isLogin|判断是否登陆
    isHttpsPage|是否是https
    rootDomain|根域
    currentDomain|当前页面域
    isSuperBranch|是否包含super分支h5页面
    gtAppVersion(version)|当前app版本是否不低于传入版本
    bridgeApp(ifanliurl)|调用ifanli链接
    rebuildCallback(cb, holdcb)|传入函数cb，生成临时全局函数，用完即销毁（holdcb为true不销毁），返回值为生成的临时全局函数名
    fanliTitle(imgTitle)|需引入JSAPI，设置app导航栏title为图片
    fanliBg({color, imgUrl})|需引入JSAPI，设置app导航栏title为图片
    fanliBtns(btnsArr)|需引入JSAPI，设置app导航栏按钮，[查看具体参数说明](http://192.168.100.87/App:jssdk)
    showPopLayer(url)|显示透明弹层，app内部使用
    isIos|是否是ios系统
    convert2HttpsProtocol(url)|http转https
    repairUrl(url)|传入链接保持和当前页面相同的协议
    getTodayExpire(timestamp)|当前时间(或传入秒级时间戳)距离今晚12点剩余天数，通常配合设置cookie今晚过期
    getUrlParam([url,] name)|获取url的参数，url不传，从当前页面url获取
    delUrlParam(url, q)|从url上删除对应的参数，并返回url
    addParamToUrl(url, objParam, needReplace)|给url添加参数,needReplace默认为false，不替换原有参数
    getRandomText(arr)|随机获取数组中的一项
    isIosX|判断iPhone X、iPhone XS
    isIosXMax|判断iPhone XS Max
    isIosXR|判断iPhone XR
    isIosBangs|判断是否是全面屏iphone，包括上三种
    fanliLogin|返利登陆
    setupShareIcon(callback)|app内分享按钮配置
    Toast.open(content,class)|toast提示，第二个参数自定义样式
    appUAInfo|appUA信息，浏览器中返回空对象



### window.Device.Utility.Browser
- language，浏览器语言
- versions
  
    参数|说明
    :--:|:--:
    trident|IE内核
    presto|opera内核
    webkit|苹果、谷歌内核
    gecko|火狐内核
    mobile|是否为移动终端
    ios|ios终端
    android|android终端或uc浏览器
    iPhone|是否为iPhone或者QQHD浏览器
    iPad|是否iPad
    webapp|是否web应该程序，没有头部与底部
    fanliapp|是否返利网APP

### 其他事项
- cookie
  - FirstUrl，初始页面
  - LandingUrl，着陆页面
- class
  - J_need_fanli_login，点击会调用Fanli.Utility.fanliLogin


## 返利app JSAPI
[@webapp-fanli-bridge-js](https://static2.51fanli.net/static/webapp-fanli-bridge-js.js)

## 好货日报app JSAPI
[@webapp-jhaohuo-bridge-js](https://static2.51fanli.net/static/webapp-jhaohuo-bridge-js.js)

## Vue v2.4.0
https://static2.51fanli.net/common/libs/fmu/js/vendors/vue/vue.min.js

## Jquery v1.8.3
https://static2.51fanli.net/common/libs/jquery/jquery.min.js

## Jquery v2.1.1
https://static2.51fanli.net/common/libs/fmu/js/vendors/jquery/jquery.min.js